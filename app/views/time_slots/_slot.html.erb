<div id="<%= dom_id(time_slot) %>" class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition hover:shadow-md">
  <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <p class="text-lg font-semibold text-slate-800"><%= time_slot.start_time.strftime('%-I:%M %p') %></p>
      <p class="text-sm text-slate-500">
        <%= pluralize(time_slot.available_slots, 'spot') %> left Â·
        <%= time_slot.booked_count %>/<%= time_slot.max_patients %> booked
      </p>
    </div>
    <div class="flex flex-col items-start gap-2 sm:flex-row sm:items-center">
      <% if just_booked && !time_slot.bookable? %>
        <span class="inline-flex items-center gap-1 rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-700">
          <span class="h-2 w-2 animate-pulse rounded-full bg-amber-500"></span>
          Just booked!
        </span>
      <% end %>
      <% if time_slot.bookable? %>
        <%= link_to "Book this time", new_appointment_path(time_slot_id: time_slot.id),
                    data: { turbo_frame: dom_id(time_slot, :booking) },
                    class: "inline-flex items-center justify-center rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 transition" %>
      <% else %>
        <button disabled
                class="inline-flex cursor-not-allowed items-center justify-center rounded-full bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-400">
          Fully booked
        </button>
      <% end %>
    </div>
  </div>
  
  <!-- Booking form will load here -->
  <%= turbo_frame_tag dom_id(time_slot, :booking) do %>
  <% end %>
</div>
