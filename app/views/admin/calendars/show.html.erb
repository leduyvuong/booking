<% content_for :head do %>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" data-turbo-track="reload">
<% end %>
<% content_for :scripts do %>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js" data-turbo-track="reload"></script>
<% end %>

<div class="space-y-6">
  <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-slate-900">Clinic calendar</h1>
      <p class="mt-1 text-sm text-slate-500">Visualize all availability and bookings in one place. Drag-to-create is coming soon.</p>
    </div>
    <div class="flex items-center space-x-3 text-xs text-slate-600">
      <div class="flex items-center space-x-2"><span class="inline-block h-3 w-3 rounded-full bg-emerald-500"></span><span>Available</span></div>
      <div class="flex items-center space-x-2"><span class="inline-block h-3 w-3 rounded-full bg-amber-500"></span><span>Partially booked</span></div>
      <div class="flex items-center space-x-2"><span class="inline-block h-3 w-3 rounded-full bg-rose-500"></span><span>Full</span></div>
      <div class="flex items-center space-x-2"><span class="inline-block h-3 w-3 rounded-full bg-slate-400"></span><span>Blocked</span></div>
    </div>
  </div>

  <div class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm" data-controller="calendar" data-calendar-events-value='<%= @events.to_json %>'>
    <div data-calendar-target="calendar"></div>

    <div class="hidden" data-calendar-target="modal">
      <div class="fixed inset-0 z-40 bg-slate-900/40" data-action="click->calendar#closeModal"></div>
      <div class="fixed inset-0 z-50 flex items-center justify-center px-4">
        <div class="w-full max-w-lg rounded-xl bg-white p-6 shadow-xl" data-action="click->calendar#stop">
          <div class="flex items-start justify-between">
            <div>
              <h2 class="text-lg font-semibold text-slate-900" data-calendar-target="modalTitle"></h2>
              <p class="mt-1 text-sm text-slate-500" data-calendar-target="modalSubtitle"></p>
            </div>
            <button type="button" class="text-slate-400 hover:text-slate-600" data-action="calendar#closeModal">&times;</button>
          </div>
          <div class="mt-4 space-y-2" data-calendar-target="modalBody"></div>
        </div>
      </div>
    </div>
  </div>
</div>
