<div class="flex items-center justify-between">
  <div>
    <h1 class="text-2xl font-semibold text-slate-900"><%= @doctor.name %></h1>
    <p class="mt-1 text-sm text-slate-500"><%= @doctor.specialty %> Â· <%= @doctor.clinic.name %></p>
  </div>
  <div class="flex items-center space-x-3">
    <%= link_to "Edit", edit_admin_doctor_path(@doctor), class: "inline-flex items-center rounded-md border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50" %>
    <%= button_to "Delete", admin_doctor_path(@doctor), method: :delete, data: { turbo_confirm: "Delete this doctor?" }, class: "inline-flex items-center rounded-md bg-rose-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-rose-500" %>
  </div>
</div>

<div class="mt-8 grid gap-8 lg:grid-cols-3">
  <div class="lg:col-span-2 space-y-6">
    <div class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-lg font-semibold text-slate-900">About</h2>
      <p class="mt-3 text-sm leading-6 text-slate-600"><%= simple_format(@doctor.bio.presence || "No bio provided yet.") %></p>
    </div>

    <div class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
      <h2 class="text-lg font-semibold text-slate-900">Recent time slots</h2>
      <% slots = @doctor.time_slots.order(date: :desc, start_time: :desc).limit(5) %>
      <% if slots.any? %>
        <ul class="mt-4 space-y-3">
          <% slots.each do |slot| %>
            <li class="flex items-center justify-between rounded-lg border border-slate-200 px-4 py-3">
              <div>
                <p class="text-sm font-medium text-slate-800"><%= slot.date.strftime('%a, %b %d') %></p>
                <p class="text-xs text-slate-500"><%= slot.start_time.strftime('%H:%M') %> - <%= slot.end_time.strftime('%H:%M') %></p>
              </div>
              <span class="text-xs font-medium text-slate-500"><%= slot.booked_count %>/<%= slot.max_patients %> booked</span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="mt-4 text-sm text-slate-500">No time slots scheduled.</p>
      <% end %>
    </div>
  </div>

  <div class="space-y-6">
    <div class="rounded-xl border border-slate-200 bg-white p-6 text-center shadow-sm">
      <% if @doctor.avatar_url.present? %>
        <img src="<%= @doctor.avatar_url %>" alt="<%= @doctor.name %>" class="mx-auto h-24 w-24 rounded-full object-cover" />
      <% else %>
        <div class="mx-auto flex h-24 w-24 items-center justify-center rounded-full bg-slate-100 text-2xl font-semibold text-slate-500">
          <%= @doctor.name.first %>
        </div>
      <% end %>
      <p class="mt-3 text-sm text-slate-500">Joined <%= @doctor.created_at.strftime('%B %d, %Y') %></p>
    </div>
  </div>
</div>
